####################
# General
####################
set -g status on
set -g status-keys emacs
set -g history-limit 1000000
set -g prefix C-t

setw -g aggressive-resize on

# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1

set -g renumber-windows on

setw -g monitor-activity on
set -g visual-activity on

set -g status-bg green
setw -g window-status-current-bg red
setw -g window-status-current-attr bold
set -g status-right '#7H | %F %s'

####################
# Movement and split
####################
bind-key C-t last-window

# moving between panes
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R
# split
bind-key | split-window -h -c "#{pane_current_path}"
bind-key - split-window -v -c "#{pane_current_path}"
bind-key c new-window -c "#{pane_current_path}"

# Moving to already marked pane
# Remember that : Prefix + m mark a panel
bind \ switch-client -t'{marked}'

# swapping panes
bind > swap-pane -D       # swap current pane with the next one
bind < swap-pane -U       # swap current pane with the previous one

# swapping windows
bind -r P swap-window -d -t -1
bind -r N swap-window -d -t +1

####################
# Pane naming configuration
####################

# pane configuration
# name pane after index and title
set -g pane-border-format "#{pane_index} #{pane_title}"
# show pane status ( with the name) on top
set -g pane-border-status top


####################
# Pane resizing
####################
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

####################
# Pane breaking and joining
####################

# Break pane in its own window
# Prefix + !
# To join(move) a pane into another window
#bind C-j choose-window 'join-pane -h -s "%%"'
#bind C-J choose-window 'join-pane -s "%%"'

## Join windows: <prefix> s, <prefix> j
bind-key a command-prompt -p "join pane from:"  "join-pane -s '%%'"
bind-key S command-prompt -p "send pane to:"  "join-pane -t '%%'"
bind-key b break-pane

####################
# Mouse support
####################
set -g mouse on
# toggle mouse with Ctr+t Ctrl-m
bind-key C-m set-option -g mouse \; display-message 'Mouse #{?mouse,on,off}'

bind -n WheelUpPane if-shell -F -t = "#{mouse_any_flag}" "send-keys -M" "if -Ft= '#{pane_in_mode}' 'send-keys -M' 'select-pane -t=; copy-mode -e; send-keys -M'"
bind -n WheelDownPane select-pane -t= \; send-keys -M

set-option -s set-clipboard off
bind-key -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "xclip -selection clipboard -i"

####################
# theme
####################
source ~/.dotfiles/.tmux_line.conf

# reload configuration
bind r source-file ~/.tmux.conf \; display '~/.tmux.conf sourced'


###############################################################
### PLUGINS
###############################################################
# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'

# Initialize TMUX Plugin Manager (KEEP THIS LINE AT THE VERY BOTTOM OF YOUR tmux.conf)
set-environment -g PATH "/usr/local/bin:/bin:/usr/bin"
run '~/.tmux/plugins/tpm/tpm'


##############################################################################
# Old comments
#############################################################################
###
# Help: como cambiar title del pane
###
#$ tmux select-pane -t {pane} -T {title}
#
## Examples:
#$ tmux select-pane -T title1          # Change title of current pane
#$ tmux select-pane -t 1 -T title2     # Change title of pane 1 in current window
#$ tmux select-pane -t 2.1 -T title3   # Change title of pane 1 in window 2

## BINDINGS



#Quick pane selection
#bind -r C-h select-window -t :-
#bind -r C-l select-window -t :+
